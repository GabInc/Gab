!function(exports){"use strict";exports.gabConciergeJSONConfig={menu:{main:{actions:["news","music","fun","plan","social","learn"]},news:{title:"News is important...",actions:["sports_news","hot_news","political_news","world_news","gossip_news","inspiring_news"]},music:{title:"News is important...",actions:["news","music","fun","plan","social","learn"]},fun:{title:"News is important...",actions:["news","music","fun","plan","social","learn"]},plan:{title:"News is important...",actions:["news","music","fun","plan","social","learn"]},social:{title:"News is important...",actions:["news","music","fun","plan","social","learn"]},learn:{title:"News is important...",actions:["news","music","fun","plan","social","learn"]},browse:{title:"News is important...",actions:["news","music","fun","plan","social","learn"]},sports_news:{title:"Select an options, lay back and enjoy the mo'!",actions:["sports_news_scores","sports_news_all","sports_news_hockey","create_concierge"]}},link:{score_board:{logo:"http://placecage.com/100/40",text:"Label",href:"http://example.com"},rds:{logo:"http://placecage.com/100/40",text:"Label",href:"http://example.com"},stanley:{logo:"http://placecage.com/100/40",text:"Label",href:"http://example.com"}},action:{sports_news_scores:{title:"Only Scores",description:"All the Sports, one scoreboard, even cricket",type:"link",links:["score_board"]},sports_news_all:{title:"All Sports",description:"All the things sports!",type:"link",links:["rds"]},sports_news_hockey:{title:"Hockey Hockey!",description:"Where's that puck!?!?!",type:"link",links:["stanley"]},create_concierge:{title:"Hockey Hockey!",description:"Where's that puck!?!?!",type:"feature"},sports_news:{icon:"http://placecage.com/100/100",title:"Sports News-ah!",type:"menu"},hot_news:{icon:"http://placecage.com/100/100",title:"Burning Hot News!",type:"menu"},political_news:{icon:"http://placecage.com/100/100",title:"All About The Man!",type:"menu"},world_news:{icon:"http://placecage.com/100/100",title:"World Hapennings!",type:"menu"},gossip_news:{icon:"http://placecage.com/100/100",title:"Miley Cirus!",type:"menu"},inspiring_news:{icon:"http://placecage.com/100/100",title:"Legalize Marijuana!",type:"menu"},news:{icon:"http://placecage.com/100/100",title:"Catch Up On Some News",type:"menu"},music:{icon:"http://placecage.com/100/100",title:"Listen To Some Music",type:"menu"},fun:{icon:"http://placecage.com/100/100",title:"Laugh Your Ass Off",type:"menu"},plan:{icon:"http://placecage.com/100/100",title:"Plan Your Day",type:"menu"},social:{icon:"http://placecage.com/100/100",title:"See What Your Friends Are Up To",type:"menu"},learn:{icon:"http://placecage.com/100/100",title:"Learn Something Cool",type:"menu"}}}}(window),function(){"use strict";var Concierge,location,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Handlebars.registerHelper("render_actions",function(obj){var out;return out=obj.map(function(name){var rendered;return rendered=Concierge.render(Concierge.action[name]),rendered.get(0).outerHTML}),new Handlebars.SafeString(out.join(""))}),Handlebars.registerHelper("render_links",function(obj){var out;return out=obj.map(function(name){var rendered;return rendered=Concierge.render(Concierge.link[name]),rendered.get(0).outerHTML}),new Handlebars.SafeString(out.join(""))}),location=window.history.location||window.location,Concierge=function(){function Concierge(name){return this.name=name,this.classname=this.constructor.name.toLowerCase(),this.json=Concierge.json[this.classname][this.name],Concierge.decorate(this.json,{name:this.name,classname:this.classname,domid:""+this.classname+"_"+this.name}),this}return Concierge.decorate=function(object,properties){var key,val;for(key in properties)val=properties[key],object[key]=val;return object},Concierge.json=window.gabConciergeJSONConfig,Concierge.resetMenus=function(callback){return Concierge.container.find(".menu.active").removeClass("active"),setTimeout(callback,200)},Concierge.activateMenu=function(href){var name;return Concierge.busy?!1:(Concierge.busy=!0,name=href.replace(/#|_menu/g,""),Concierge.resetMenus(function(){return Concierge.menu[name].show(function(){var historyMethod;return Concierge.busy=!1,historyMethod="replaceState",history.state&&history.state.target&&history.state.target!==href&&(historyMethod="pushState"),history[historyMethod]({target:href},name,""+href)})}),this)},Concierge.init=function(container){return Concierge.container=$(container).empty(),Object.keys(Concierge.json).forEach(function(klass){return Concierge[klass]={},Object.keys(Concierge.json[klass]).reduce(function(mapping,name){return mapping[name]=Concierge.factory(klass,name),mapping[name].init(),mapping},Concierge[klass])}),Object.keys(Concierge.menu).forEach(function(name){var render;return render=Concierge.render(Concierge.menu[name]),Concierge.container.append(render)}),Concierge.container.on("click",".menu-action .inner, .menu .back",function(event){return event.preventDefault(),Concierge.activateMenu($(this).attr("href"))}),Concierge},Concierge.factory=function(klass,name){var Klass;return Klass=klass[0].toUpperCase()+klass.slice(1),new Concierge[Klass](name)},Concierge.render=function(instance){var $el,classname,render,templateSource;return classname=instance.classname,templateSource=$("#"+classname+"_template").html(),render=Handlebars.compile(templateSource),$el=$(render(instance.json)),$el.data(classname,instance),instance.$el=$el,$el},Concierge}(),Concierge.Action=function(_super){function Action(){return Action.__super__.constructor.apply(this,arguments)}return __extends(Action,_super),Action.prototype.init=function(){return Concierge.decorate(this.json,{href:""+this.name+"_"+this.json.type}),this},Action}(Concierge),Concierge.Link=function(_super){function Link(){return Link.__super__.constructor.apply(this,arguments)}return __extends(Link,_super),Link.prototype.init=function(){return Concierge.decorate(this.json,{href:""+this.name+"_link"}),this},Link}(Concierge),Concierge.Menu=function(_super){function Menu(){return Menu.__super__.constructor.apply(this,arguments)}return __extends(Menu,_super),Menu.prototype.init=function(){return this.isMain="main"===this.name,Concierge.decorate(this.json,{href:""+this.name+"_"+this.json.type}),this},Menu.prototype.show=function(callback){return this.$el.addClass("active"),setTimeout(callback,200)},Menu.prototype.hide=function(){return this.$el.removeClass("active"),setTimeout(callback,200)},Menu}(Concierge),Concierge.Visitor=function(){function Visitor(){}return Visitor}(),$(function(){return Concierge.init("#content"),Concierge.activateMenu("#main_menu"),$(window).on("popstate",function(event){var state;return state=event.originalEvent.state,state?Concierge.activateMenu(state.target):void 0})})}.call(this);