<template name="ApplicationLayout">
<body>
  <navbar>
      {{> yield "navbar"}}
  </navbar>
  <content>
      {{> yield}}
  </content>
 
 

  <footer>
   {{> yield "footer"}}
  </footer>
</body>
</template>

<template name="Footer">
  {{#if currentUser}}
    <div id="footer">
      <div class="container">
        <ul class="list-inline">
          <li><span id="home" class="glyphicon glyphicon-home footer-icons" aria-hidden="true"></span></li>
          <li><span id="profile" class="glyphicon glyphicon-user footer-icons" aria-hidden="true"></span></li>
          <li><span id="messages" class="glyphicon glyphicon-comment footer-icons" aria-hidden="true"></span></li>
          <li><span id="feed" class="glyphicon glyphicon-globe footer-icons" aria-hidden="true"></span></li>
          <li><span id="logout" class="glyphicon glyphicon-log-out footer-icons" aria-hidden="true"></span></li>
        </ul>
      </div>
    </div>
  {{else}}
  {{/if}}
</template>
<template name="navbar">
    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
    <!-- 	  <form id="search_form">
           <div class="inner-addon left-addon">
	    <i class="glyphicon glyphicon-search"></i> 
	    <input type="text" class="search square">
	   </div>
	  </form> -->
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
	    {{> loginButtons}}
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
</template>
<template name="Home">
  <div class="container-fluid">
    <div class="row">
      <div class="col-xs-12 greatings">
        <h2>{{_ "Hello " }}{{#if currentUser}}{{currentUser.username}}{{/if}}</h2>
        <h3>{{_ "It's " }}{{current_day.day}} {{current_day.part}}{{_ " and right now, you could " }}</h3>
      </div>

    </div>
    <div class="row">
      {{#each activities}}
      <div class="col-xs-4 col-sm-2">
        <div class="icons">
          <img src="/arcade.svg" class="img" alt="Responsive image">
          <p>{{name}}</p>
        </div>
      </div>
      {{/each}}
    </div>
  </div>
</template>
<template name="Admin">
<div style="height:100%;background-color:white;">
  {{#if currentUser}}
<p>Admin ici</p>
<h2>ON TOUCHE PAS AUX PITONS, MERCI</h2>
<button id="del_convs" class="btn btn-sm">Delete all conversations</button>
<button id="del_mess" class="btn btn-sm">Delete all messages</button>
<button id="del_posts" class="btn btn-sm">Delete all posts</button>
<button id="del_tags" class="btn btn-sm">Delete all tags</button>
<button id="del_acts" class="btn btn-sm">Delete all Activities</button>    
    <div class="panel panel-default" style="margin:10px;">
     <div id="users_admin"> 
      <ul>
         <li style="background-color: lightgrey;">{{_ "Username" }}<button type="button" class="friends_button" aria-hidden="true" disabled>{{_ "Make staff" }}</button></li>
      {{#each allusers}}
         <li>{{username}} - {{#if profile.is_staff}} staff {{else}} pas staff {{/if}}
           <button type="button" id="make_staff" class="friends_button glyphicon glyphicon-thumbs-up" aria-hidden="true"><span></span></button>
        </li>
      {{/each}}	
      </ul>
     </div> 
    </div>
    <div class="panel panel-default" style="margin:10px;">
      <p>New activity</p>
      <form id="new-act" style="padding:10px;">
        <input style="margin-top:10px;" name="name" class="form-control input-lg" type="text" placeholder="{{_ "Activity name here" }}">
        <input style="margin-top:10px;" name="slug" class="form-control input-lg" type="text" placeholder="{{_ "Activity slug here" }}">
	<input style="margin-top:10px;" class="btn" type="submit" value="Create">
      </form>
    </div>
    <div class="panel panel-default" style="margin:10px;">
      <p>New tag</p>
      <form id="new-tag" style="padding:10px;">
        <input style="margin-top:10px;" name="name" class="form-control input-lg" type="text" placeholder="{{_ "Tag name here" }}">
	<input style="margin-top:10px;" name="slug" class="form-control input-lg" type="text" placeholder="{{_ "Tag slug here" }}">
        <input style="margin-top:10px;" class="btn" type="submit" value="Create">
      </form>
    </div> 
    <div class="panel panel-default" style="margin:10px;">
      <p>New link</p>
      <form id="new-link" style="padding:10px;">
        <input style="margin-top:10px;" name="url" class="form-control input-lg" type="text" placeholder="{{_ "Url here" }}">
        <input style="margin-top:10px;" class="btn" type="submit" value="Create">
      </form>
    </div>

{{else}}

{{/if}}
</div>
</template>
<template name="feed">
    <div id="wrapper">
      <form class="new-post">
       <input name="text" class="form-control input-lg" type="text" placeholder="{{_ "Update your public profile" }}">
      </form>
       <div id="profile_box">
	<ul>
        {{#each posts}}
        {{> post}}
	{{/each}}
        </ul>
       </div>
    </div>
</template>

 <template name="messages">   
    <div id="wrapper">
     <div id="scroller">
      <h3>{{_ "Your"}} <small>{{_ "conversations"}}: </small></h3>
        <ul>
	{{> conversations}}
	</ul>	
      </div>	
    </div>

</template>
<template name="message_box">
    <div id="wrapper_messages">

       <div id="scroller" class="mess_scroller">
        <div class="conv_wrapper">
         <ul class="conversations_ul">
          {{#each messages}}
            {{> message}}
          {{/each}}
         </ul>
        </div>
       </div>
    </div>
    {{> message_form}}
</template>

<template name="message_form">
    <form id="new-message">
      <input name="text" class="form-control input-lg" type="text" placeholder="{{_ "Parle-moi de toi?" }}">
    </form>
</template>


<template name="post">
    <li>@{{ username author_id }} - {{text}}<button type="button" class="delete close"><span>&times;</span></button></li>
</template>
<template name="message">
    <li>@{{ username author_id }} - {{text}}</li>
</template>
<template name="search_results">
  <div class="search_results">
    <ul>
       {{#esEach index="users"}}
         {{> search_user}}
       {{/esEach}}
    </ul>
  </div>
</template>
<template name="search_user">
  <li>
    {{ username }}
    <button type="button" id="info_button" class="friends_button glyphicon glyphicon-question-sign" aria-hidden="true"><span></span></button>
    <button type="button" id="add_button" class="friends_button glyphicon glyphicon-plus" aria-hidden="true"><span></span></button>
  </li>
</template>
<template name="friends">
 <div id="wrapper">
   {{> esInput index="users" placeholder="Search for friends" }}
   {{> search_results}}
   <div class="friends">
     <h3>{{_ "Friends"}}</h3>
     <ul>
     {{ #each friends.friends }}
    
       <li>
       {{username}}
       <button type="button" id="unfollow_button" class="friends_button glyphicon glyphicon-remove" aria-hidden="true"><span></span></button>
       <button type="button" id="new_conv" class="friends_button glyphicon glyphicon-comment" aria-hidden="true"><span></span></button>
       </li>
    {{/each}}
    </ul>
   </div>
   <div class="friends">
     <h3>{{_ "Following" }}</h3>
     <ul>

     {{ #each friends.folls }}
       <li>
       {{username}}
       <button type="button" id="unfollow_button" class="friends_button glyphicon glyphicon-remove" aria-hidden="true"><span></span></button>
       </li>
     {{/each}}
     </ul>
   </div>
   <div class="friends">
     <h3>{{_ "Followers" }}</h3>
     <ul>
     {{ #each followers }}
       <li>
       {{username}}
       <button type="button" id="follow_button" class="friends_button glyphicon glyphicon-plus" aria-hidden="true"><span></span></button>
       </li>
     {{/each}}
     </ul>
   </div>  
 </div>  


</template>
<template name="conversations">
{{ #each conversations }}

      <li class="conversations">
      {{#if last_message this._id}}
	@{{username this._id}} - {{last_message this._id}}
      {{else}}
        New
      {{/if}}	
    <!--    <button type="button" id="delete_conversation" class="friends_button glyphicon glyphicon-remove" aria-hidden="true"><span></span></button>
    -->
        <button style="float:right;" type="button" id="conversation" class="friends_button glyphicon glyphicon-pencil" aria-hidden="true"><span></span></button>
        <div style="float:right;">{{_ "With" }} : {{other_user this._id}}</div>
      </li>

{{/each}}
</template>
