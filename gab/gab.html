<template name="ApplicationLayout">
<body>
  <content>
      {{> yield}}
  </content>
  
  <footer>
   {{> yield "footer"}}
  </footer>
</body>
</template>


<template name="Home">
  {{#if currentUser}}
    {{> home_content }}
  {{else}}
    {{> loginButtons}}
  {{/if}}
</template>


<template name="Footer">
  {{#if currentUser}}
    <div id="footer">
      <div class="container">
        <ul class="list-inline">
          <li><span id="home" class="glyphicon glyphicon-home footer-icons" aria-hidden="true"></span></li>
          <li><span id="profile" class="glyphicon glyphicon-user footer-icons" aria-hidden="true"></span></li>
          <li><span id="messages" class="glyphicon glyphicon-comment footer-icons" aria-hidden="true"></span></li>
          <li><span class="glyphicon glyphicon-globe footer-icons" aria-hidden="true"></span></li>
          <li><span id="logout" class="glyphicon glyphicon-log-out footer-icons" aria-hidden="true"></span></li>
        </ul>
      </div>
    </div>
  {{else}}
  {{/if}}
</template>

<template name="profile">
    <div id="wrapper">
      <form class="new-post">
       <input name="text" class="form-control input-lg" type="text" placeholder="{{_ "Update your public profile" }}">
      </form>
       <div id="profile_box">
	<ul>
        {{#each posts}}
        {{> post}}
	{{/each}}
        </ul>
       </div>
    </div>
</template>

<template name="home_content">
    <div id="wrapper">
      {{> esInput index="users" placeholder="Search for friends" }}
      {{> search_results}}

        {{> friends}}
    </div>	
 </template>   
 <template name="messages">   
    <div id="wrapper">

      <div id="conversations">
      <h3>Your <small>conversations: </small></h3>
        <ul>
	{{> conversations}}
	</ul>			    				    
      </div>
    </div>

</template>
<template name="message_box">
    <div id="wrapper">
      {{> message_form}}

      {{test}}
       <div id="scroller">
         <ul>
          {{#each messages}}
            {{> message}}
          {{/each}}
        </ul>
       </div>
    </div>
</template>

<template name="message_form">
    <form id="new-message">
      <input name="text" class="form-control input-lg" type="text" placeholder="{{_ "Parle-moi de toi?" }}">
    </form>
</template>


<template name="post">
    <li>@{{ username author_id }} - {{text}}<button type="button" class="delete close"><span>&times;</span></button></li>
</template>
<template name="message">
    <li>@{{ username author_id }} - {{text}}</li>
</template>
<template name="search_results">
  <div class="search_results">
    <ul>
       {{#esEach index="users"}}
         {{> search_user}}
       {{/esEach}}
    </ul>
  </div>
</template>
<template name="search_user">
  <li>
    {{ username }}
    <button type="button" id="info_button" class="friends_button glyphicon glyphicon-question-sign" aria-hidden="true"><span></span></button>
    <button type="button" id="add_button" class="friends_button glyphicon glyphicon-plus" aria-hidden="true"><span></span></button>
  </li>
</template>
<template name="friends">

   <div class="friends">
     <h3>Friends: </h3>
     <ul>
     {{ #each friends.friends }}
    
       <li>
       {{username}}
       <button type="button" id="unfollow_button" class="friends_button glyphicon glyphicon-remove" aria-hidden="true"><span></span></button>
       <button type="button" id="new_conv" class="friends_button glyphicon glyphicon-comment" aria-hidden="true"><span></span></button>
       </li>
    {{/each}}
    </ul>
   </div>
   <div class="friends">
     <h3>Followed:</h3>
     <ul>

     {{ #each friends.folls }}
       <li>
       {{username}}
       <button type="button" id="unfollow_button" class="friends_button glyphicon glyphicon-remove" aria-hidden="true"><span></span></button>
       </li>
     {{/each}}
     </ul>
   </div>
   <div class="friends">
     <h3>Followed by:</h3>
     <ul>
     {{ #each friends.follby }}
       <li>
       {{username}}
       <button type="button" id="follow_button" class="friends_button glyphicon glyphicon-plus" aria-hidden="true"><span></span></button>
       </li>
     {{/each}}
     </ul>
   </div>  
</template>
<template name="conversations">
{{ #each conversations }}

      <li>
      {{#if last_message this._id}}
	@{{username this._id}} - {{last_message this._id}}
      {{else}}
        New
      {{/if}}	
    <!--    <button type="button" id="delete_conversation" class="friends_button glyphicon glyphicon-remove" aria-hidden="true"><span></span></button>
    -->
        <button type="button" id="conversation" class="friends_button glyphicon glyphicon-pencil" aria-hidden="true"><span></span></button>
      </li>

{{/each}}
</template>
